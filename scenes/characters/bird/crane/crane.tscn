[gd_scene load_steps=19 format=3 uid="uid://pu5sg2sp8sv"]

[ext_resource type="Script" path="res://scenes/characters/bird/bird.gd" id="1_p03h7"]
[ext_resource type="Script" path="res://systems/state_machine_system/state_machine.gd" id="2_27nvl"]
[ext_resource type="PackedScene" uid="uid://dl873s53iqi1r" path="res://systems/state_machine_system/states/bird_states/bird_idle/bird_idle.tscn" id="3_tvf66"]
[ext_resource type="PackedScene" uid="uid://vjxtoccpe81v" path="res://systems/state_machine_system/states/bird_states/flying/flying.tscn" id="4_pelxj"]
[ext_resource type="PackedScene" uid="uid://dq36rqfby3kqy" path="res://systems/state_machine_system/states/bird_states/landing/landing.tscn" id="5_2f5be"]
[ext_resource type="PackedScene" uid="uid://r37qxmbq8ed" path="res://systems/state_machine_system/states/bird_states/bird_roaming/bird_roaming.tscn" id="6_gho6q"]
[ext_resource type="PackedScene" uid="uid://byn2qixwy5kqh" path="res://systems/state_machine_system/states/generic_states/roam_walking/roam_walking.tscn" id="7_pukod"]
[ext_resource type="PackedScene" uid="uid://bqigwm5m08lwe" path="res://systems/state_machine_system/states/generic_states/emoting/emoting.tscn" id="8_r44py"]
[ext_resource type="PackedScene" uid="uid://dyht2bgp1t14x" path="res://systems/state_machine_system/states/bird_states/takeoff/takeoff.tscn" id="9_kc2fe"]
[ext_resource type="Script" path="res://scripts/resource_definitions/REmote.gd" id="9_uavbj"]
[ext_resource type="PackedScene" uid="uid://dkgiu5xo5ydyv" path="res://systems/state_machine_system/states/generic_states/despawning/despawning.tscn" id="10_0iwf5"]
[ext_resource type="SpriteFrames" uid="uid://dvy18wsnnrct6" path="res://resources/config/animated_spriteframes/crane_spriteframes.tres" id="10_2q6jn"]
[ext_resource type="Resource" uid="uid://bn2q8ira4huo3" path="res://resources/r_audio_stream_data/birds/crane/crane_call.tres" id="10_bc7e7"]
[ext_resource type="Resource" uid="uid://boa4wwdgsmd5o" path="res://resources/r_audio_stream_data/birds/crane/crane_forage.tres" id="11_653mv"]
[ext_resource type="PackedScene" uid="uid://vx7l7yoxtgjd" path="res://systems/audio_system/scenes/one_shot_sound_component/one_shot_sound_component.tscn" id="13_qhsyl"]

[sub_resource type="Resource" id="Resource_6ecwm"]
script = ExtResource("9_uavbj")
emote_name = "bird_call"
animation_name = "emote_call"
audio_delay = 0.0
audio_data = ExtResource("10_bc7e7")

[sub_resource type="Resource" id="Resource_e18wr"]
script = ExtResource("9_uavbj")
emote_name = "bird_forage"
animation_name = "emote_forage"
audio_delay = 0.0
audio_data = ExtResource("11_653mv")

[sub_resource type="CircleShape2D" id="CircleShape2D_wbbwi"]
radius = 21.095

[node name="Crane" type="Node2D"]
z_index = 3
scale = Vector2(0.75, 0.75)
script = ExtResource("1_p03h7")
bird_area_tags = Array[String](["water"])
actions_range = Vector2i(2, 4)

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("initial_node_state")]
script = ExtResource("2_27nvl")
initial_node_state = NodePath("Flying")

[node name="Idle" parent="StateMachine" node_paths=PackedStringArray("parent", "animated_sprite_2d") instance=ExtResource("3_tvf66")]
parent = NodePath("../..")
animated_sprite_2d = NodePath("../../AnimatedSprite2D")

[node name="Flying" parent="StateMachine" node_paths=PackedStringArray("parent", "animated_sprite_2d", "area_2d") instance=ExtResource("4_pelxj")]
parent = NodePath("../..")
animated_sprite_2d = NodePath("../../AnimatedSprite2D")
area_2d = NodePath("../../Area2D")

[node name="Landing" parent="StateMachine" node_paths=PackedStringArray("parent", "animated_sprite_2d") instance=ExtResource("5_2f5be")]
parent = NodePath("../..")
animated_sprite_2d = NodePath("../../AnimatedSprite2D")
next_state_name = "roaming"

[node name="Roaming" parent="StateMachine" node_paths=PackedStringArray("parent", "animated_sprite_2d", "area_2d") instance=ExtResource("6_gho6q")]
parent = NodePath("../..")
animated_sprite_2d = NodePath("../../AnimatedSprite2D")
area_2d = NodePath("../../Area2D")

[node name="RoamWalking" parent="StateMachine" node_paths=PackedStringArray("parent", "animated_sprite_2d", "area_2d") instance=ExtResource("7_pukod")]
parent = NodePath("../..")
animated_sprite_2d = NodePath("../../AnimatedSprite2D")
area_2d = NodePath("../../Area2D")

[node name="Emoting" parent="StateMachine" node_paths=PackedStringArray("parent", "animated_sprite_2d", "area_2d", "bird_audio") instance=ExtResource("8_r44py")]
parent = NodePath("../..")
animated_sprite_2d = NodePath("../../AnimatedSprite2D")
area_2d = NodePath("../../Area2D")
bird_audio = NodePath("../../BirdAudio")
emotes = Array[ExtResource("9_uavbj")]([SubResource("Resource_6ecwm"), SubResource("Resource_e18wr")])
next_state_name = "roaming"

[node name="Takeoff" parent="StateMachine" node_paths=PackedStringArray("parent", "animated_sprite_2d") instance=ExtResource("9_kc2fe")]
parent = NodePath("../..")
animated_sprite_2d = NodePath("../../AnimatedSprite2D")

[node name="Despawning" parent="StateMachine" node_paths=PackedStringArray("parent", "animated_sprite_2d") instance=ExtResource("10_0iwf5")]
parent = NodePath("../..")
animated_sprite_2d = NodePath("../../AnimatedSprite2D")

[node name="Area2D" type="Area2D" parent="."]
collision_layer = 1024
collision_mask = 514

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area2D"]
position = Vector2(-4, -12)
shape = SubResource("CircleShape2D_wbbwi")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
position = Vector2(-2, -18)
sprite_frames = ExtResource("10_2q6jn")
animation = &"emote_forage_right"

[node name="BirdAudio" parent="." instance=ExtResource("13_qhsyl")]
